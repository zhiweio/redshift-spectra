# Redshift Spectra Configuration Template
# Copy this file to .env and fill in the required values
# All variables use the SPECTRA_ prefix

# =============================================================================
# AWS Configuration
# =============================================================================
SPECTRA_AWS_REGION=us-east-1

# =============================================================================
# Redshift Configuration (Required)
# =============================================================================
# Redshift cluster identifier
SPECTRA_REDSHIFT_CLUSTER_ID=my-redshift-cluster

# Redshift database name
SPECTRA_REDSHIFT_DATABASE=mydb

# Secrets Manager ARN for Redshift credentials
SPECTRA_REDSHIFT_SECRET_ARN=arn:aws:secretsmanager:us-east-1:123456789012:secret:redshift/credentials

# Redshift Serverless workgroup name (optional, leave empty for provisioned cluster)
# SPECTRA_REDSHIFT_WORKGROUP_NAME=my-workgroup

# =============================================================================
# Redshift Session Reuse Configuration
# =============================================================================
# Session keep-alive duration in seconds (max 24 hours = 86400)
SPECTRA_REDSHIFT_SESSION_KEEP_ALIVE_SECONDS=3600

# Session idle timeout before cleanup (seconds)
SPECTRA_REDSHIFT_SESSION_IDLE_TIMEOUT_SECONDS=300

# =============================================================================
# DynamoDB Configuration
# =============================================================================
# DynamoDB table for job state
SPECTRA_DYNAMODB_TABLE_NAME=spectra-jobs

# DynamoDB table for Redshift sessions
SPECTRA_DYNAMODB_SESSIONS_TABLE_NAME=spectra-sessions

# TTL for job records in days
SPECTRA_DYNAMODB_TTL_DAYS=7

# =============================================================================
# S3 Configuration (Required)
# =============================================================================
# S3 bucket for large result exports
SPECTRA_S3_BUCKET_NAME=my-spectra-exports-bucket

# S3 prefix for export files
SPECTRA_S3_PREFIX=exports/

# Presigned URL expiration in seconds
SPECTRA_PRESIGNED_URL_EXPIRY=3600

# =============================================================================
# Query Configuration
# =============================================================================
# Row count threshold before switching to S3 export
SPECTRA_RESULT_SIZE_THRESHOLD=10000

# Query timeout in seconds
SPECTRA_QUERY_TIMEOUT_SECONDS=900

# Maximum concurrent queries per tenant
SPECTRA_MAX_CONCURRENT_QUERIES=10

# =============================================================================
# API Configuration
# =============================================================================
# API version prefix
SPECTRA_API_VERSION=v1

# Allowed CORS origins (comma-separated for multiple origins)
SPECTRA_CORS_ORIGINS=["*"]

# Rate limit per minute per tenant
SPECTRA_RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# Authentication Configuration
# =============================================================================
# Authentication mode: api_key, jwt, or iam
SPECTRA_AUTH_MODE=api_key

# Secrets Manager ARN for JWT secret (required if auth_mode=jwt)
# SPECTRA_JWT_SECRET_ARN=arn:aws:secretsmanager:us-east-1:123456789012:secret:jwt/secret

# Expected JWT issuer (optional)
# SPECTRA_JWT_ISSUER=https://auth.example.com

# Expected JWT audience (optional)
# SPECTRA_JWT_AUDIENCE=spectra-api

# =============================================================================
# Logging Configuration
# =============================================================================
# Logging level: DEBUG, INFO, WARNING, ERROR
SPECTRA_LOG_LEVEL=INFO

# Enable AWS X-Ray tracing
SPECTRA_ENABLE_XRAY=true
